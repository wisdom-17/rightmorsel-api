jQuery(document).ready(function(i){function e(e,a){var t=i("#give-form-"+e),d=t.find('input[name="give_gift_aid_address_option"]:radio:checked').val(),n=t.find("#give-gift-aid-address-wrap-"+e);t.find(".cc-address").length>0&&"another_address"!==d?t.find(".give-gift-check-is-billing-address").val("yes"):t.find(".give-gift-check-is-billing-address").val("no"),a?(n.find("input:text,input[type=email],select, textarea").attr("required",!0),n.find("#give_gift_aid_card_address_2_"+e).attr("required",!1)):(n.find("input:text,input[type=email],select, textarea").attr("required",!1),n.find("#give_gift_aid_card_address_2_"+e).attr("required",!1))}var a=i("body");a.on("change",".give_gift_aid_address_option",function(){var e=i(this).closest("form.give-form");e||(e=i(this).parents("form")),t.give_gift_aid_check_address_option(e)}).change(),a.on("change","#billing_country",function(){var e=i(this).closest("form.give-form");e||(e=i(this).parents("form")),t.give_gift_aid_check_billing_country(e)}).change(),a.on("change",".give_gift_aid_accept_term_condition",function(){var e=i(this).closest("form.give-form");e||(e=i(this).parents("form"));var a=e.find('input[name="give_gift_aid_accept_term_condition"]').is(":checked"),t=e.find('input[name="give-form-id"]').val(),d=e.find('input[name="give_gift_aid_address_option"]:radio:checked').val(),n=e.find(".give-gift-aid-address-wrap");n.hide(),a&&n.show(),!a||"another_address"!==d&&0!==e.find(".cc-address").length?(e.find("#give-gift-aid-address-button-"+t).show(),e.find("#give-gift-aid-address-fields-"+t).hide(),n.find("input:text,input[type=email],select, textarea").attr("required",!1),n.find("#give_gift_aid_card_address_2_"+t).attr("required",!1)):(e.find("#give-gift-aid-address-button-"+t).hide(),e.find("#give-gift-aid-address-fields-"+t).show(),n.find("input:text,input[type=email],select, textarea").attr("required",!0),n.find("#give_gift_aid_card_address_2_"+t).attr("required",!1))}).change(),a.on("click",".give-gift-aid-explanation-content-more",function(){var e=i(this).closest("form.give-form");e||(e=i(this).parents("form"));var a=e.find(".give-gift-aid-long-explanation-wrap"),d=e.find('input[name="give-form-id"]').val(),n=e.find("#give-gift-aid-long-explanation-wrap"+d),r=e.find("#give-gift-aid-long-explanation-content-"+d);jQuery.magnificPopup.open({mainClass:give_global_vars.magnific_options.main_class,closeOnBgClick:give_global_vars.magnific_options.close_on_bg_click,fixedContentPos:!0,fixedBgPos:!0,items:{src:a,type:"inline"},callbacks:{open:function(){n.addClass("mfp-show"),n.removeClass("mfp-hide"),r.addClass("mfp-show")},close:function(){n.removeClass("mfp-show"),n.addClass("mfp-hide")}}}),t.give_gift_aid_check_display_option(e)}),a.on("click",".give_gift_aid_take_to_my_donation",function(){var e=i(".give-gift-aid-long-explanation-wrap").data("id"),a=i("#give-form-"+e);i("#give-form-"+e+"-wrap").is(".give-display-modal, .give-display-button")?(a.find(".give-btn-modal").trigger("click"),i(".mfp-close").show()):i(".mfp-close").trigger("click")}),i("input.give-gateway").on("change",function(){var a=i(this).closest("form.give-form"),d=i(this).val(),n=give_gift_aid_vars.gift_aid_site_url+"/wp-admin/admin-ajax.php?payment-mode="+d;a||(a=i(this).parents("form"));var r=a.find('input[name="give-form-id"]').val();a.find('input[name="payment-mode"]').removeAttr("checked"),i(this).attr("checked","checked"),i(document).ajaxComplete(function(i,d,s){var _=s.url;_===n&&(t.give_gift_aid_check_address_option(a),t.give_gift_aid_check_billing_country(a),t.give_gift_aid_check_billing_details(a),e(r,!1))})});var t={init:function(){i(".give-form-wrap").each(function(){var e=i(this).find(".give-form");t.give_gift_aid_check_billing_country(e),t.give_gift_aid_check_address_option(e),t.give_gift_aid_check_billing_details(e),t.give_gift_aid_check_display_option(e)})},give_gift_aid_check_address_option:function(i){var a=i.find('input[name="give-form-id"]').val(),t=i.find('input[name="give_gift_aid_address_option"]:radio:checked').val(),d=i.find("#give-gift-aid-address-fields-"+a),n=i.find("#give-gift-aid-address-wrap-"+a);n.hide();var r=i.find(".give_gift_aid_accept_term_condition").is(":checked");r&&n.show(),"another_address"===t?(d.show(),e(a,!0)):(d.hide(),e(a,!1))},give_gift_aid_check_billing_details:function(i){var e=i.find('input[name="give-form-id"]').val();i.find(".cc-address").length>0?(i.find("#give-gift-aid-address-button-"+e).show(),i.find("#give-gift-aid-address-fields-"+e).hide()):(i.find("#give-gift-aid-address-button-"+e).hide(),i.find("#give-gift-aid-address-fields-"+e).show())},give_gift_aid_check_display_option:function(e){var a=e.find('input[name="give-form-id"]').val();i("#give-form-"+a+"-wrap").hasClass("give-display-modal")&&i(".mfp-close").remove()},give_gift_aid_check_billing_country:function(i){var e=i.find('select[name="billing_country"]').val(),a=i.find('input[name="give-form-id"]').val(),t=i.find("#give-gift-aid-address-wrap-"+a),d=i.find("#give-gift-aid-dedicate-donation-"+a);"undefined"==typeof e&&(e=give_gift_aid_vars.gift_aid_base_country),"GB"===e?(d.show(),t.find("input:text,input[type=email],select, textarea").attr("required",!0),t.find("#give_gift_aid_card_address_2_"+a).attr("required",!1)):(d.hide(),t.find("input:text,input[type=email],select, textarea").attr("required",!1),t.find("#give_gift_aid_card_address_2_"+a).attr("required",!1))}};t.init()});